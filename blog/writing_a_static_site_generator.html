
<!DOCTYPE html>
<html>
<head>
    <title>nireo</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div>
        <nav>
          <a href="/">home</a>
          <a href="/projects">projects</a>
          <a href="https://github.com/nireo" rel="noopener noreferrer"
            >github</a
          >
        </nav>
        <main>
            <h1 id="writing-a-small-static-site-generator-using-go">Writing a small static site generator using Go</h1>
<p>Go is a very popular choice for static site genetors since for example <a href="https://github.com/gohugoio/hugo">hugo</a>. The static site generator we're going to be writing today can create blogs pages from markdown files and have basic support for pages. This site is generated using a similar static site generator.</p>
<p>The example of usage here is:</p>
<pre><code>$ go run gen.go -src=pages -dst=mysite
</code></pre>
<p>Let's start by reading the files in the source directory</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;"><code><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;flag&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">srcDir</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">String</span>(<span style="color:#e6db74">&#34;src&#34;</span>, <span style="color:#e6db74">&#34;./&#34;</span>, <span style="color:#e6db74">&#34;the source directory to take markdown files from there&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">dstDir</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">String</span>(<span style="color:#e6db74">&#34;dst&#34;</span>, <span style="color:#e6db74">&#34;./&#34;</span>, <span style="color:#e6db74">&#34;the destination to store files&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">Parse</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">files</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">ReadDir</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">srcDir</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error reading posts directory: %s&#34;</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">MkdirAll</span>(<span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">Join</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">dstDir</span>, <span style="color:#e6db74">&#34;blog&#34;</span>), <span style="color:#ae81ff">0755</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error creating blog dir: %s&#34;</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre>
            
        </main>
    </div>
</body>
</html>
